"use strict";(self["webpackChunkjshtcm"]=self["webpackChunkjshtcm"]||[]).push([[80],{5484:function(e,t,r){r.d(t,{y:function(){return n}});var s=r(3766);const n=(0,s.Q_)("store",{state:()=>({token:"",accessToken:"",HospitalZone:{},Dept:{},Doctor:{}})})},5585:function(e,t,r){r.d(t,{D:function(){return n},b:function(){return s}});const s={get_hospital:"/phs-base/getHospital",get_deptlist:"/phs-reg/reg/getDeptList",get_dept_sch_for_doc:"/phs-reg/reg/getDeptSchForDoc",get_doc_sch:"/phs-reg/reg/getDocSch",get_pat_card_list:"/phs-base/relevantPatient/getPatCardList",get_number_source:"/phs-reg/reg/getNumberSource",add_reg:"/phs-reg/reg/addReg",login:"http://wechat.jshtcm.com/cas-wechat/logon/login",jsonRequest:"http://wechat.jshtcm.com/cas-wechat/*.jsonRequest"},n={phsid:"81681688",syscode:"1001035"}},3112:function(e,t,r){r(8675),r(3462),r(7380),r(1118),r(1703);var s=function(){function e(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return e.hashStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendStr(e).end(t)},e.hashAsciiStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendAsciiStr(e).end(t)},e._hex=function(t){var r,s,n,a,o=e.hexChars,i=e.hexOut;for(a=0;a<4;a+=1)for(s=8*a,r=t[a],n=0;n<8;n+=2)i[s+1+n]=o.charAt(15&r),r>>>=4,i[s+0+n]=o.charAt(15&r),r>>>=4;return i.join("")},e._md5cycle=function(e,t){var r=e[0],s=e[1],n=e[2],a=e[3];r+=(s&n|~s&a)+t[0]-680876936|0,r=(r<<7|r>>>25)+s|0,a+=(r&s|~r&n)+t[1]-389564586|0,a=(a<<12|a>>>20)+r|0,n+=(a&r|~a&s)+t[2]+606105819|0,n=(n<<17|n>>>15)+a|0,s+=(n&a|~n&r)+t[3]-1044525330|0,s=(s<<22|s>>>10)+n|0,r+=(s&n|~s&a)+t[4]-176418897|0,r=(r<<7|r>>>25)+s|0,a+=(r&s|~r&n)+t[5]+1200080426|0,a=(a<<12|a>>>20)+r|0,n+=(a&r|~a&s)+t[6]-1473231341|0,n=(n<<17|n>>>15)+a|0,s+=(n&a|~n&r)+t[7]-45705983|0,s=(s<<22|s>>>10)+n|0,r+=(s&n|~s&a)+t[8]+1770035416|0,r=(r<<7|r>>>25)+s|0,a+=(r&s|~r&n)+t[9]-1958414417|0,a=(a<<12|a>>>20)+r|0,n+=(a&r|~a&s)+t[10]-42063|0,n=(n<<17|n>>>15)+a|0,s+=(n&a|~n&r)+t[11]-1990404162|0,s=(s<<22|s>>>10)+n|0,r+=(s&n|~s&a)+t[12]+1804603682|0,r=(r<<7|r>>>25)+s|0,a+=(r&s|~r&n)+t[13]-40341101|0,a=(a<<12|a>>>20)+r|0,n+=(a&r|~a&s)+t[14]-1502002290|0,n=(n<<17|n>>>15)+a|0,s+=(n&a|~n&r)+t[15]+1236535329|0,s=(s<<22|s>>>10)+n|0,r+=(s&a|n&~a)+t[1]-165796510|0,r=(r<<5|r>>>27)+s|0,a+=(r&n|s&~n)+t[6]-1069501632|0,a=(a<<9|a>>>23)+r|0,n+=(a&s|r&~s)+t[11]+643717713|0,n=(n<<14|n>>>18)+a|0,s+=(n&r|a&~r)+t[0]-373897302|0,s=(s<<20|s>>>12)+n|0,r+=(s&a|n&~a)+t[5]-701558691|0,r=(r<<5|r>>>27)+s|0,a+=(r&n|s&~n)+t[10]+38016083|0,a=(a<<9|a>>>23)+r|0,n+=(a&s|r&~s)+t[15]-660478335|0,n=(n<<14|n>>>18)+a|0,s+=(n&r|a&~r)+t[4]-405537848|0,s=(s<<20|s>>>12)+n|0,r+=(s&a|n&~a)+t[9]+568446438|0,r=(r<<5|r>>>27)+s|0,a+=(r&n|s&~n)+t[14]-1019803690|0,a=(a<<9|a>>>23)+r|0,n+=(a&s|r&~s)+t[3]-187363961|0,n=(n<<14|n>>>18)+a|0,s+=(n&r|a&~r)+t[8]+1163531501|0,s=(s<<20|s>>>12)+n|0,r+=(s&a|n&~a)+t[13]-1444681467|0,r=(r<<5|r>>>27)+s|0,a+=(r&n|s&~n)+t[2]-51403784|0,a=(a<<9|a>>>23)+r|0,n+=(a&s|r&~s)+t[7]+1735328473|0,n=(n<<14|n>>>18)+a|0,s+=(n&r|a&~r)+t[12]-1926607734|0,s=(s<<20|s>>>12)+n|0,r+=(s^n^a)+t[5]-378558|0,r=(r<<4|r>>>28)+s|0,a+=(r^s^n)+t[8]-2022574463|0,a=(a<<11|a>>>21)+r|0,n+=(a^r^s)+t[11]+1839030562|0,n=(n<<16|n>>>16)+a|0,s+=(n^a^r)+t[14]-35309556|0,s=(s<<23|s>>>9)+n|0,r+=(s^n^a)+t[1]-1530992060|0,r=(r<<4|r>>>28)+s|0,a+=(r^s^n)+t[4]+1272893353|0,a=(a<<11|a>>>21)+r|0,n+=(a^r^s)+t[7]-155497632|0,n=(n<<16|n>>>16)+a|0,s+=(n^a^r)+t[10]-1094730640|0,s=(s<<23|s>>>9)+n|0,r+=(s^n^a)+t[13]+681279174|0,r=(r<<4|r>>>28)+s|0,a+=(r^s^n)+t[0]-358537222|0,a=(a<<11|a>>>21)+r|0,n+=(a^r^s)+t[3]-722521979|0,n=(n<<16|n>>>16)+a|0,s+=(n^a^r)+t[6]+76029189|0,s=(s<<23|s>>>9)+n|0,r+=(s^n^a)+t[9]-640364487|0,r=(r<<4|r>>>28)+s|0,a+=(r^s^n)+t[12]-421815835|0,a=(a<<11|a>>>21)+r|0,n+=(a^r^s)+t[15]+530742520|0,n=(n<<16|n>>>16)+a|0,s+=(n^a^r)+t[2]-995338651|0,s=(s<<23|s>>>9)+n|0,r+=(n^(s|~a))+t[0]-198630844|0,r=(r<<6|r>>>26)+s|0,a+=(s^(r|~n))+t[7]+1126891415|0,a=(a<<10|a>>>22)+r|0,n+=(r^(a|~s))+t[14]-1416354905|0,n=(n<<15|n>>>17)+a|0,s+=(a^(n|~r))+t[5]-57434055|0,s=(s<<21|s>>>11)+n|0,r+=(n^(s|~a))+t[12]+1700485571|0,r=(r<<6|r>>>26)+s|0,a+=(s^(r|~n))+t[3]-1894986606|0,a=(a<<10|a>>>22)+r|0,n+=(r^(a|~s))+t[10]-1051523|0,n=(n<<15|n>>>17)+a|0,s+=(a^(n|~r))+t[1]-2054922799|0,s=(s<<21|s>>>11)+n|0,r+=(n^(s|~a))+t[8]+1873313359|0,r=(r<<6|r>>>26)+s|0,a+=(s^(r|~n))+t[15]-30611744|0,a=(a<<10|a>>>22)+r|0,n+=(r^(a|~s))+t[6]-1560198380|0,n=(n<<15|n>>>17)+a|0,s+=(a^(n|~r))+t[13]+1309151649|0,s=(s<<21|s>>>11)+n|0,r+=(n^(s|~a))+t[4]-145523070|0,r=(r<<6|r>>>26)+s|0,a+=(s^(r|~n))+t[11]-1120210379|0,a=(a<<10|a>>>22)+r|0,n+=(r^(a|~s))+t[2]+718787259|0,n=(n<<15|n>>>17)+a|0,s+=(a^(n|~r))+t[9]-343485551|0,s=(s<<21|s>>>11)+n|0,e[0]=r+e[0]|0,e[1]=s+e[1]|0,e[2]=n+e[2]|0,e[3]=a+e[3]|0},e.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this},e.prototype.appendStr=function(t){var r,s,n=this._buffer8,a=this._buffer32,o=this._bufferLength;for(s=0;s<t.length;s+=1){if(r=t.charCodeAt(s),r<128)n[o++]=r;else if(r<2048)n[o++]=192+(r>>>6),n[o++]=63&r|128;else if(r<55296||r>56319)n[o++]=224+(r>>>12),n[o++]=r>>>6&63|128,n[o++]=63&r|128;else{if(r=1024*(r-55296)+(t.charCodeAt(++s)-56320)+65536,r>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");n[o++]=240+(r>>>18),n[o++]=r>>>12&63|128,n[o++]=r>>>6&63|128,n[o++]=63&r|128}o>=64&&(this._dataLength+=64,e._md5cycle(this._state,a),o-=64,a[0]=a[16])}return this._bufferLength=o,this},e.prototype.appendAsciiStr=function(t){for(var r,s=this._buffer8,n=this._buffer32,a=this._bufferLength,o=0;;){r=Math.min(t.length-o,64-a);while(r--)s[a++]=t.charCodeAt(o++);if(a<64)break;this._dataLength+=64,e._md5cycle(this._state,n),a=0}return this._bufferLength=a,this},e.prototype.appendByteArray=function(t){for(var r,s=this._buffer8,n=this._buffer32,a=this._bufferLength,o=0;;){r=Math.min(t.length-o,64-a);while(r--)s[a++]=t[o++];if(a<64)break;this._dataLength+=64,e._md5cycle(this._state,n),a=0}return this._bufferLength=a,this},e.prototype.getState=function(){var e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}},e.prototype.setState=function(e){var t,r=e.buffer,s=e.state,n=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],t=0;t<r.length;t+=1)this._buffer8[t]=r.charCodeAt(t)},e.prototype.end=function(t){void 0===t&&(t=!1);var r=this._bufferLength,s=this._buffer8,n=this._buffer32,a=1+(r>>2);this._dataLength+=r;var o=8*this._dataLength;if(s[r]=128,s[r+1]=s[r+2]=s[r+3]=0,n.set(e.buffer32Identity.subarray(a),a),r>55&&(e._md5cycle(this._state,n),n.set(e.buffer32Identity)),o<=4294967295)n[14]=o;else{var i=o.toString(16).match(/(.*?)(.{0,8})$/);if(null===i)return;var h=parseInt(i[2],16),c=parseInt(i[1],16)||0;n[14]=h,n[15]=c}return e._md5cycle(this._state,n),t?this._state:e._hex(this._state)},e.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),e.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e.hexChars="0123456789abcdef",e.hexOut=[],e.onePassHasher=new e,e}();if(t.V=s,"5d41402abc4b2a76b9719d911017c592"!==s.hashStr("hello"))throw new Error("Md5 self test failed.")},6080:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var s=r(3396);const n=e=>((0,s.dD)("data-v-c8cb3b12"),e=e(),(0,s.Cn)(),e),a={class:"login-view"},o=n((()=>(0,s._)("div",{style:{"text-align":"center",width:"100%"}}," 江苏省中医院自动挂号 ",-1))),i=["src"],h=(0,s.Uk)("登录"),c=(0,s.Uk)("重置");function u(e,t,r,n,u,d){const f=(0,s.up)("el-form-item"),l=(0,s.up)("el-input"),_=(0,s.up)("el-button"),p=(0,s.up)("el-row"),g=(0,s.up)("el-form");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(p,{justify:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{class:"border","label-width":"auto",size:"large"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[o])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l,{modelValue:u.username,"onUpdate:modelValue":t[0]||(t[0]=e=>u.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l,{modelValue:u.password,"onUpdate:modelValue":t[1]||(t[1]=e=>u.password=e),placeholder:"请输入密码",type:"password"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l,{modelValue:u.verification_code,"onUpdate:modelValue":t[2]||(t[2]=e=>u.verification_code=e),placeholder:"请输入验证码"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s._)("img",{src:u.verification_code_img,alt:"加载失败"},null,8,i)])),_:1}),(0,s.Wm)(p,{justify:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{type:"primary",onClick:d.login},{default:(0,s.w5)((()=>[h])),_:1},8,["onClick"]),(0,s.Wm)(_,{type:"primary",onClick:d.reset},{default:(0,s.w5)((()=>[c])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])}var d=r(7178),f=r(5484),l=r(5585),_=r(3112);const p=(0,f.y)();var g={name:"LoginView",data(){return{username:"",password:"",required:!0,verification_code_img:"",uniqueId:"",verification_code:""}},methods:{login(){const e=new _.V;e.appendStr(this.password);const t={tenantId:"hcn.jsszyy",pwd:e.end(),forAccessToken:!0,rid:"patient",verifyCode:this.verification_code,uniqueId:this.uniqueId,loginName:this.username};this.axios.post(l.b.login,t).then((e=>{200===e.data.code?(d.z8.success(`用户：${e.data.body.userName} 登录成功`),p.accessToken=e.data.properties.accessToken,this.get_he_ren_token()):d.z8.error(e.data.msg)})).catch((e=>{d.z8.error(e),p.token="tmp",this.$router.push("/hospitalzone")}))},reset(){this.username="",this.password="",this.verification_code=""},refresh_verification_code(){const e={"Content-Type":"application/json","X-Service-Id":"cas-wechat.smsService","X-Service-Method":"getVerifyCodeInfo"},t=[{}];this.axios.post(l.b.jsonRequest,t,{headers:e}).then((e=>{const t=JSON.parse(e.data.body);this.verification_code_img="data:image/png;base64,"+t.verifyCode,this.uniqueId=t.uniqueId})).catch((e=>{console.log("获取验证码失败！"),console.log(e)}))},get_he_ren_token(){const e={"X-Service-Method":"getHeRenToken","X-Access-Token":p.accessToken,"X-Service-Id":"cas-wechat.heRenService","Content-Type":"application/json"},t=[{openId:""}];this.axios.post(l.b.jsonRequest,t,{headers:e}).then((e=>{200===e.data.code?(p.token=e.data.body,localStorage.setItem("jshtcm",JSON.stringify({token:p.token,accessToken:p.accessToken})),this.$router.push("/hospitalzone"),console.log("登陆成功，跳转页面")):d.z8.error(e.data.msg)})).catch((e=>{d.z8.error(e),console.log(e)}))}},mounted(){this.refresh_verification_code()}},m=r(89);const b=(0,m.Z)(g,[["render",u],["__scopeId","data-v-c8cb3b12"]]);var y=b}}]);
//# sourceMappingURL=80.18d63a71.js.map