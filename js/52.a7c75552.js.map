{"version":3,"file":"js/52.a7c75552.js","mappings":"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","sources":["webpack://jshtcm/./src/views/DoctorDetailsView.vue","webpack://jshtcm/./src/views/DoctorDetailsView.vue?aec1"],"sourcesContent":["<template>\n  <div>\n    <h1 style=\"text-align: center\">请勾选期望预约挂号的时间段</h1>\n    <el-row justify=\"center\">\n      <el-col style=\"max-width: 400px\">\n        <div v-for=\"(item, index) in DocSch\" :key=\"index\">\n          <el-collapse v-model=\"activeName\" accordion>\n            <el-collapse-item :title=\"item.schDate\">\n              <el-table\n                :data=\"item.schDateList\"\n                @selection-change=\"handleSelectionChange\"\n              >\n                <el-table-column type=\"selection\"></el-table-column>\n                <el-table-column label=\"时段\" prop=\"ampmName\"></el-table-column>\n                <!--                <el-table-column prop=\"deptName\" label=\"科室\"></el-table-column>-->\n                <el-table-column\n                  label=\"医生名称\"\n                  prop=\"docName\"\n                ></el-table-column>\n                <el-table-column label=\"挂号费\" prop=\"fee\"></el-table-column>\n                <el-table-column label=\"状态\" prop=\"schState\">\n                  <template v-slot=\"scope\">\n                    <span\n                      v-if=\"scope.row.schState === '0'\"\n                      style=\"color: green\"\n                    >\n                      可预约\n                    </span>\n                    <span\n                      v-else-if=\"scope.row.schState === '2'\"\n                      style=\"color: red\"\n                    >\n                      约满\n                    </span>\n                    <span\n                      v-else-if=\"scope.row.schState === '1'\"\n                      style=\"color: red\"\n                    >\n                      停诊\n                    </span>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </el-collapse-item>\n          </el-collapse>\n        </div>\n      </el-col>\n    </el-row>\n    <el-row justify=\"center\">\n      <el-button\n        v-show=\"runningState\"\n        size=\"large\"\n        style=\"margin-top: 20px\"\n        type=\"primary\"\n        @click=\"updateSelectedPeriodTimeList\"\n        >确定\n      </el-button>\n      <el-button\n        v-show=\"!runningState\"\n        size=\"large\"\n        style=\"margin-top: 20px\"\n        type=\"danger\"\n        @click=\"StopTimer\"\n        >停止\n      </el-button>\n    </el-row>\n  </div>\n  <div>\n    <el-row justify=\"center\">\n      <el-col style=\"max-width: 400px\">\n        <el-divider></el-divider>\n      </el-col>\n    </el-row>\n  </div>\n  <div>\n    <el-dialog v-model=\"dialogVisible\" title=\"运行前确认已选择时段\">\n      <el-table\n        :data=\"selected_period_time_list\"\n        :default-sort=\"{ prop: 'schDate', order: 'ascending' }\"\n      >\n        <el-table-column label=\"日期\" prop=\"schDate\" sortable></el-table-column>\n        <el-table-column label=\"时段\" prop=\"ampmName\"></el-table-column>\n        <el-table-column label=\"科室\" prop=\"deptName\"></el-table-column>\n        <el-table-column label=\"医生名称\" prop=\"docName\"></el-table-column>\n        <el-table-column label=\"挂号费\" prop=\"fee\"></el-table-column>\n        <el-table-column label=\"状态\" prop=\"schState\">\n          <template v-slot=\"scope\">\n            <span v-if=\"scope.row.schState === '0'\" style=\"color: green\">\n              可预约\n            </span>\n            <span v-else-if=\"scope.row.schState === '2'\" style=\"color: red\">\n              约满\n            </span>\n            <span v-else-if=\"scope.row.schState === '1'\" style=\"color: red\">\n              停诊\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">返回</el-button>\n          <el-button type=\"primary\" @click=\"getPatCardList\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n  <div>\n    <el-dialog v-model=\"PatCardDialogVisible\" title=\"请选择就诊卡\">\n      <el-radio-group\n        v-for=\"(PatPerson, index) in PatCardList\"\n        :key=\"index\"\n        v-model=\"PatCard\"\n      >\n        <el-radio :label=\"JSON.stringify(PatPerson)\"\n          >{{ PatPerson.name }}\n        </el-radio>\n      </el-radio-group>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button\n            @click=\"\n              PatCardDialogVisible = false;\n              PatCard = '';\n            \"\n            >返回</el-button\n          >\n          <el-button type=\"primary\" @click=\"startTimer\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n  <div>\n    <el-dialog v-model=\"reservation_status\" title=\"预约成功！\">\n      <el-alert :closable=\"false\" effect=\"dark\" type=\"success\"\n        >预约成功！请在10分钟内前往订单页面付款并停止程序运行！若未及时停止程序运行，程序将在10分钟后自动重新预约！\n      </el-alert>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button type=\"primary\" @click=\"ClearTimeout\">停止程序</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n  <div>\n    <el-row justify=\"center\">\n      <el-col style=\"max-width: 400px\">\n        <el-progress\n          :format=\"format\"\n          :indeterminate=\"indeterminate\"\n          :percentage=\"percentage\"\n        />\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { Store } from \"@/stores\";\nimport { getPhsSign } from \"@/utils/Func\";\nimport { API, Config } from \"@/utils/API\";\nimport { ElMessage } from \"element-plus\";\nimport { ref } from \"vue\";\n\nconst store = Store();\nexport default {\n  name: \"DoctorDetailsView\",\n  components: {},\n  data() {\n    return {\n      runningState: true,\n      DocSch: [],\n      activeName: ref(\"0\"),\n      selected_period_time: {},\n      selected_period_time_list: [],\n      dialogVisible: false,\n      PatCardDialogVisible: false,\n      PatCardList: [],\n      PatCard: ref(\"\"),\n      percentage: ref(0),\n      indeterminate: false,\n      timer: [],\n      reservation_status: false,\n      next_round: undefined,\n    };\n  },\n  methods: {\n    getDocSch() {\n      const headers = {\n        phsSign: getPhsSign(),\n        phsId: Config.phsid,\n        \"Content-Type\": \"application/json\",\n      };\n      const data = {\n        args: {\n          docId: store.Doctor.docId,\n          docName: store.Doctor.docName,\n          docTitle: store.Doctor.docTitle,\n          docPhoto: store.Doctor.docPhoto,\n          deptId: store.Doctor.deptId,\n          deptName: store.Doctor.deptName,\n          hosId: store.Doctor.hosId,\n          hosName: store.Doctor.hosName,\n          type: \"order\",\n          visitingArea: \"\",\n          clinicalType: 1,\n          source: 22,\n          sysCode: store.HospitalZone.sysCode,\n        },\n        token: store.token,\n      };\n      this.axios.post(API.get_doc_sch, data, { headers }).then((res) => {\n        if (res.data.code === \"0\") {\n          this.DocSch = res.data.result.dataList;\n        } else {\n          ElMessage.error(res.data.message);\n        }\n      });\n    },\n    getPatCardList() {\n      if (this.selected_period_time_list.length === 0) {\n        ElMessage.error(\"请选择时段\");\n        return;\n      }\n      const headers = {\n        phsSign: getPhsSign(),\n        phsId: Config.phsid,\n        \"Content-Type\": \"application/json\",\n      };\n      const data = {\n        args: {\n          sysCode: store.HospitalZone.sysCode,\n        },\n        token: store.token,\n      };\n      this.axios.post(API.get_pat_card_list, data, { headers }).then((res) => {\n        if (res.data.code === \"0\") {\n          this.PatCardList = res.data.result;\n          this.dialogVisible = false;\n          this.PatCardDialogVisible = true;\n        } else {\n          ElMessage.error(res.data.message);\n        }\n      });\n    },\n    getNumberSource(period_time) {\n      console.log(period_time);\n      const headers = {\n        phsSign: getPhsSign(),\n        phsId: Config.phsid,\n        \"Content-Type\": \"application/json\",\n      };\n      const data = {\n        args: {\n          sysCode: store.HospitalZone.sysCode,\n          ampm: period_time.ampm,\n          categor: period_time.categor,\n          docId: period_time.docId,\n          deptId: period_time.deptId,\n          hosId: period_time.hosId,\n          schDate: period_time.schDate,\n          schId: period_time.schId,\n        },\n        token: store.token,\n      };\n      this.axios.post(API.get_number_source, data, { headers }).then((res) => {\n        const result = res.data.result;\n        console.log(result);\n        if (result.length > 0) {\n          ElMessage.info(\"存在可预约时间，程序将尝试自动预约。\");\n          return this.add_reg(result[0], period_time);\n        }\n      });\n    },\n    add_reg(appointment_time, period_time) {\n      const headers = {\n        phsSign: getPhsSign(),\n        phsId: Config.phsid,\n        \"Content-Type\": \"application/json\",\n      };\n      const data = {\n        args: {\n          ...period_time,\n          ...appointment_time,\n          ...store.Dept,\n          ...store.HospitalZone,\n          ...store.Doctor,\n          ...JSON.parse(this.PatCard),\n          source: 22,\n          resDate: period_time.schDate,\n          patientId: JSON.parse(this.PatCard).patienId,\n          appointmentNumber: appointment_time.disNo,\n        },\n        token: store.token,\n      };\n      this.axios.post(API.add_reg, data, { headers }).then((res) => {\n        if (res.data.code === \"0\") {\n          ElMessage.success(res.data.message);\n          this.StopTimer();\n          this.reservation_status = true;\n          this.next_round = setTimeout(() => {\n            this.reservation_status = false;\n            this.startTimer();\n          }, 600000);\n        } else {\n          ElMessage.error(res.data.message);\n        }\n      });\n    },\n    handleSelectionChange(select) {\n      console.log(this.activeName);\n      this.selected_period_time[this.activeName] = select;\n    },\n    updateSelectedPeriodTimeList() {\n      this.selected_period_time_list = [];\n      for (const key in this.selected_period_time) {\n        for (const item in this.selected_period_time[key]) {\n          this.selected_period_time_list.push(\n            this.selected_period_time[key][item]\n          );\n        }\n      }\n      this.dialogVisible = true;\n    },\n    startTimer() {\n      if (this.PatCard === \"\") {\n        ElMessage.error(\"请选择就诊卡\");\n        return;\n      }\n      this.PatCardDialogVisible = false;\n      this.indeterminate = true;\n      this.runningState = false;\n      this.percentage = 100;\n      console.log(this.PatCard);\n      console.log(this.selected_period_time_list);\n      for (const period_time_index in this.selected_period_time_list) {\n        console.log(this.selected_period_time_list[period_time_index]);\n        this.timer.push(\n          setInterval(\n            this.getNumberSource,\n            10000,\n            this.selected_period_time_list[period_time_index]\n          )\n        );\n      }\n      for (const period_time_index in this.selected_period_time_list) {\n        this.getNumberSource(this.selected_period_time_list[period_time_index]);\n      }\n    },\n    StopTimer() {\n      this.indeterminate = false;\n      this.percentage = 0;\n      this.runningState = true;\n      for (const timer_index in this.timer) {\n        clearInterval(this.timer[timer_index]);\n      }\n      this.timer = [];\n    },\n    ClearTimeout() {\n      this.reservation_status = false;\n      clearTimeout(this.next_round);\n    },\n    format() {\n      return this.percentage === 100 ? \"持续监测中\" : `尚未开始监测`;\n    },\n  },\n  mounted() {\n    if (!store.token) {\n      this.$router.push(\"/login\");\n    } else {\n      this.getDocSch();\n    }\n  },\n};\n</script>\n\n<style scoped></style>\n","import { render } from \"./DoctorDetailsView.vue?vue&type=template&id=75efca72\"\nimport script from \"./DoctorDetailsView.vue?vue&type=script&lang=js\"\nexport * from \"./DoctorDetailsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\project\\\\html\\\\jshtcm\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","style","class","_hoisted_1","_createVNode","_component_el_row","justify","_component_el_col","_createElementBlock","_Fragment","_renderList","$data","item","index","key","_component_el_collapse","$event","accordion","_component_el_collapse_item","title","schDate","_component_el_table","data","schDateList","onSelectionChange","$options","_component_el_table_column","type","label","prop","scope","row","schState","_component_el_button","size","onClick","_component_el_divider","_component_el_dialog","footer","order","sortable","PatPerson","_createBlock","_component_el_radio_group","_component_el_radio","JSON","stringify","name","_component_el_alert","closable","effect","_component_el_progress","format","indeterminate","percentage","store","Store","components","runningState","DocSch","activeName","ref","selected_period_time","selected_period_time_list","dialogVisible","PatCardDialogVisible","PatCardList","PatCard","timer","reservation_status","next_round","undefined","methods","getDocSch","headers","phsSign","getPhsSign","phsId","Config","args","docId","Doctor","docName","docTitle","docPhoto","deptId","deptName","hosId","hosName","visitingArea","clinicalType","source","sysCode","HospitalZone","token","this","axios","post","API","then","res","code","result","dataList","ElMessage","message","getPatCardList","length","getNumberSource","period_time","console","log","ampm","categor","schId","add_reg","appointment_time","Dept","parse","resDate","patientId","patienId","appointmentNumber","disNo","StopTimer","setTimeout","startTimer","handleSelectionChange","select","updateSelectedPeriodTimeList","push","period_time_index","setInterval","timer_index","clearInterval","ClearTimeout","clearTimeout","mounted","$router","__exports__","render"],"sourceRoot":""}